(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,t,n){e.exports=n(39)},20:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(14),c=n.n(u),l=(n(20),n(4)),o=n(2),i=n(3),m=n.n(i),d="/api/persons",f=(n(38),function(e){var t=e.notification,n=e.error;return null===t&&null===n?null:r.a.createElement("div",{className:n?"error":"notification"},n||t)}),s=function(e){return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:e.newFilter,onChange:function(t){return e.setNewFilter(t.target.value)}}))},b=function(e){return r.a.createElement("form",{onSubmit:e.addName},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.newName,onChange:function(t){return e.setNewName(t.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:e.newNumber,onChange:function(t){return e.setNewNumber(t.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},p=function(e){var t=e.persons,n=e.filterString,a=e.deleteName,u=t.filter((function(e){return e.name.toLowerCase().includes(n)}));return r.a.createElement("div",null,u.map((function(e){return r.a.createElement("p",{key:e.name},e.name," ",e.number,r.a.createElement("button",{onClick:function(){return a(e)}},"delete"))})))},w=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],u=t[1],c=Object(a.useState)(""),i=Object(o.a)(c,2),w=i[0],E=i[1],v=Object(a.useState)(""),h=Object(o.a)(v,2),N=h[0],j=h[1],O=Object(a.useState)(""),g=Object(o.a)(O,2),S=g[0],k=g[1],y=Object(a.useState)(null),C=Object(o.a)(y,2),F=C[0],T=C[1],D=Object(a.useState)(null),J=Object(o.a)(D,2),P=J[0],x=J[1];Object(a.useEffect)((function(){m.a.get(d).then((function(e){var t=e.data;u(t)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(f,{notification:F,error:P}),r.a.createElement(s,{newFilter:S,setNewFilter:k}),r.a.createElement("h3",null,"add a new"),r.a.createElement(b,{addName:function(e){e.preventDefault();var t,a,r={name:w,number:N},c=n.find((function(e){return e.name===w}));c?window.confirm("".concat(c.name," is already added to phonebook, replace the old number with a new one?"))&&(t=c.id,a=r,m.a.put("".concat(d,"/").concat(t),a)).then((function(){u(n.map((function(e){return e.id===c.id?Object(l.a)(Object(l.a)({},e),r):e}))),E(""),j(""),T("Updated ".concat(c.name)),setTimeout((function(){T(null)}),2e3)})).catch((function(e){x("Person ".concat(c.name," was alredy removed from server")),setTimeout((function(){x(null)}),5e3)})):function(e){return m.a.post(d,e)}(r).then((function(e){u(n.concat(e.data)),E(""),j(""),T("Added ".concat(e.data.name)),setTimeout((function(){T(null)}),2e3)}))},newName:w,newNumber:N,setNewName:E,setNewNumber:j}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(p,{persons:n,filterString:S,deleteName:function(e){var t;window.confirm("Delete ".concat(e.name," ?"))&&(t=e.id,m.a.delete("".concat(d,"/").concat(t))).then((function(){u(n.filter((function(t){return t.id!==e.id}))),T("Deleted ".concat(e.name)),setTimeout((function(){T(null)}),2e3)}))}}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.090fb628.chunk.js.map