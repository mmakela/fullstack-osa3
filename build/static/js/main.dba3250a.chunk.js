(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,t,n){e.exports=n(39)},20:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),u=n.n(c),l=(n(20),n(4)),o=n(2),i=n(3),m=n.n(i),d="/api/persons",f=(n(38),function(e){var t=e.notification,n=e.error;return null===t&&null===n?null:r.a.createElement("div",{className:n?"error":"notification"},n||t)}),s=function(e){return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:e.newFilter,onChange:function(t){return e.setNewFilter(t.target.value)}}))},b=function(e){return r.a.createElement("form",{onSubmit:e.addName},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.newName,onChange:function(t){return e.setNewName(t.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:e.newNumber,onChange:function(t){return e.setNewNumber(t.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},p=function(e){var t=e.persons,n=e.filterString,a=e.deleteName,c=t.filter((function(e){return e.name.toLowerCase().includes(n)}));return r.a.createElement("div",null,c.map((function(e){return r.a.createElement("p",{key:e.name},e.name," ",e.number,r.a.createElement("button",{onClick:function(){return a(e)}},"delete"))})))},w=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),i=Object(o.a)(u,2),w=i[0],E=i[1],h=Object(a.useState)(""),v=Object(o.a)(h,2),N=v[0],j=v[1],O=Object(a.useState)(""),g=Object(o.a)(O,2),S=g[0],k=g[1],y=Object(a.useState)(null),C=Object(o.a)(y,2),T=C[0],F=C[1],D=Object(a.useState)(null),J=Object(o.a)(D,2),P=J[0],x=J[1];Object(a.useEffect)((function(){m.a.get(d).then((function(e){var t=e.data;c(t)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(f,{notification:T,error:P}),r.a.createElement(s,{newFilter:S,setNewFilter:k}),r.a.createElement("h3",null,"add a new"),r.a.createElement(b,{addName:function(e){e.preventDefault();var t,a,r={name:w,number:N},u=n.find((function(e){return e.name===w}));u?window.confirm("".concat(u.name," is already added to phonebook, replace the old number with a new one?"))&&(t=u.id,a=r,m.a.put("".concat(d,"/").concat(t),a)).then((function(){c(n.map((function(e){return e.id===u.id?Object(l.a)(Object(l.a)({},e),r):e}))),E(""),j(""),F("Updated ".concat(u.name)),setTimeout((function(){F(null)}),2e3)})).catch((function(e){x("Person ".concat(u.name," was alredy removed from server")),setTimeout((function(){x(null)}),5e3)})):function(e){return m.a.post(d,e)}(r).then((function(e){c(n.concat(e.data)),E(""),j(""),F("Added ".concat(e.data.name)),setTimeout((function(){F(null)}),2e3)})).catch((function(e){x("".concat(e.response.data.error)),setTimeout((function(){x(null)}),5e3)}))},newName:w,newNumber:N,setNewName:E,setNewNumber:j}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(p,{persons:n,filterString:S,deleteName:function(e){var t;window.confirm("Delete ".concat(e.name," ?"))&&(t=e.id,m.a.delete("".concat(d,"/").concat(t))).then((function(){c(n.filter((function(t){return t.id!==e.id}))),F("Deleted ".concat(e.name)),setTimeout((function(){F(null)}),2e3)}))}}))};u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.dba3250a.chunk.js.map